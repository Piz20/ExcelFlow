<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <title>Logs en temps r√©el</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.5/signalr.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        #logContainer {
            border: 1px solid #ccc;
            height: 400px;
            overflow-y: scroll;
            padding: 10px;
            background: #f9f9f9;
            white-space: pre-wrap;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h2>Logs en directe</h2>
    <div id="logContainer"></div>

    <script>
        // 1. Cr√©er la connexion SignalR vers ton Hub (attention √† l'URL)
        const connection = new signalR.HubConnectionBuilder()
            .withUrl("/partnerFileHub")  // adapte ce chemin √† ton endpoint Hub c√¥t√© serveur
            .build();

        // 2. Fonction pour ajouter un message dans la div
        function addLogMessage(message) {
            const logContainer = document.getElementById("logContainer");
            const newMessage = document.createElement("div");
            newMessage.textContent = message;
            logContainer.appendChild(newMessage);
            logContainer.scrollTop = logContainer.scrollHeight; // scroll vers le bas automatiquement
        }

        // 3. √âcouteur pour recevoir les messages "ReceiveMessage"
        connection.on("ReceiveMessage", (message) => {
            addLogMessage(message);
        });

        // 4. D√©marrer la connexion SignalR
        connection.start()
            .then(() => addLogMessage("üîå Connect√© au serveur SignalR"))
            .catch(err => addLogMessage("‚ùå Erreur connexion SignalR: " + err));
    </script>
</body>
</html>
